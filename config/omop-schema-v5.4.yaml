# This file programmatically defines the OMOP CDM v5.4 schema
# It is derived from the postgresql DDL script provided by the OMOP CDM
#
# Data types are mapped to a simplified set for Pandas compatibility:
# - integer -> int
# - date/timestamp -> datetime64[ns]
# - varchar/text -> str (or str in Python)
# - numeric -> float
#
# Primary and foreign keys are based on standard OMOP conventions.

tables:
  - name: person
    primary_key: person_id
    required_columns:
      - person_id
      - gender_concept_id
      - year_of_birth
      - race_concept_id
      - ethnicity_concept_id
    datatypes:
      person_id: integer
      gender_concept_id: integer
      year_of_birth: integer
      month_of_birth: integer
      day_of_birth: integer
      birth_datetime: datetime64[ns]
      race_concept_id: integer
      ethnicity_concept_id: integer
      location_id: integer
      provider_id: integer
      care_site_id: integer
      person_source_value:
        type: string
        maxLength: 50
      gender_source_value:
        type: string
        maxLength: 50
      gender_source_concept_id: integer
      race_source_value:
        type: string
        maxLength: 50
      race_source_concept_id: integer
      ethnicity_source_value:
        type: string
        max_length: 50
      ethnicity_source_concept_id: integer
    foreign_keys:
      - column: gender_concept_id
        references: concept.concept_id
      - column: race_concept_id
        references: concept.concept_id
      - column: ethnicity_concept_id
        references: concept.concept_id
      - column: location_id
        references: location.location_id
      - column: provider_id
        references: provider.provider_id
      - column: care_site_id
        references: care_site.care_site_id
      - column: gender_source_concept_id
        references: concept.concept_id
      - column: race_source_concept_id
        references: concept.concept_id
      - column: ethnicity_source_concept_id
        references: concept.concept_id

  - name: observation_period
    primary_key: observation_period_id
    required_columns:
      - observation_period_id
      - person_id
      - observation_period_start_date
      - observation_period_end_date
      - period_type_concept_id
    datatypes:
      observation_period_id: integer
      person_id: integer
      observation_period_start_date: datetime64[ns]
      observation_period_end_date: datetime64[ns]
      period_type_concept_id: integer
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: period_type_concept_id
        references: concept.concept_id

  - name: visit_occurrence
    primary_key: visit_occurrence_id
    required_columns:
      - visit_occurrence_id
      - person_id
      - visit_concept_id
      - visit_start_date
      - visit_end_date
      - visit_type_concept_id
    datatypes:
      visit_occurrence_id: integer
      person_id: integer
      visit_concept_id: integer
      visit_start_date: datetime64[ns]
      visit_start_datetime: datetime64[ns]
      visit_end_date: datetime64[ns]
      visit_end_datetime: datetime64[ns]
      visit_type_concept_id: integer
      provider_id: integer
      care_site_id: integer
      visit_source_value:
        type: string
        maxLength: 50
      visit_source_concept_id: integer
      admitted_from_concept_id: integer
      admitted_from_source_value:
        type: string
        maxLength: 50
      discharged_to_concept_id: integer
      discharged_to_source_value:
        type: string
        maxLength: 50
      preceding_visit_occurrence_id: integer
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: provider_id
        references: provider.provider_id
      - column: care_site_id
        references: care_site.care_site_id
      - column: preceding_visit_occurrence_id
        references: visit_occurrence.visit_occurrence_id
      - column:  discharged_to_concept_id
        references: concept.concept_id
      - column: visit_source_concept_id
        references: concept.concept_id
      - column: admitted_from_concept_id
        references: concept.concept_id
      - column: admitted_from_source_concept_id
        references: concept.concept_id
      - column: discharged_to_source_concept_id
        references: concept.concept_id

  - name: visit_detail
    primary_key: visit_detail_id
    required_columns:
      - visit_detail_id
      - person_id
      - visit_detail_concept_id
      - visit_detail_start_date
      - visit_detail_end_date
      - visit_detail_type_concept_id
      - visit_occurrence_id
    datatypes:
      visit_detail_id: integer
      person_id: integer
      visit_detail_concept_id: integer
      visit_detail_start_date: datetime64[ns]
      visit_detail_start_datetime: datetime64[ns]
      visit_detail_end_date: datetime64[ns]
      visit_detail_end_datetime: datetime64[ns]
      visit_detail_type_concept_id: integer
      provider_id: integer
      care_site_id: integer
      visit_detail_source_value:
        type: string
        maxLength: 50
      visit_detail_source_concept_id: integer
      admitted_from_concept_id: integer
      admitted_from_source_value:
        type: string
        maxLength: 50
      discharged_to_source_value:
        type: string
        maxLength: 50
      discharged_to_concept_id: integer
      preceding_visit_detail_id: integer
      parent_visit_detail_id: integer
      visit_occurrence_id: integer
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: provider_id
        references: provider.provider_id
      - column: care_site_id
        references: care_site.care_site_id
      - column: visit_occurrence_id
        references: visit_occurrence.visit_occurrence_id
      - column: visit_detail_source_concept_id
        references: concept.concept_id
      - column: preceding_visit_detail_id
        references: visit_detail.visit_detail_id
      - column: parent_visit_detail_id
        references: visit_detail.visit_detail_id
      - column: admitted_from_concept_id
        references: concept.concept_id
      - column: admitted_from_source_concept_id
        references: concept.concept_id
      - column: discharged_to_concept_id
        references: concept.concept_id
      - column: discharged_to_source_concept_id
        references: concept.concept_id

  - name: condition_occurrence
    primary_key: condition_occurrence_id
    required_columns:
      - condition_occurrence_id
      - person_id
      - condition_concept_id
      - condition_start_date
      - condition_type_concept_id
    datatypes:
      condition_occurrence_id: integer
      person_id: integer
      condition_concept_id: integer
      condition_start_date: datetime64[ns]
      condition_start_datetime: datetime64[ns]
      condition_end_date: datetime64[ns]
      condition_end_datetime: datetime64[ns]
      condition_type_concept_id: integer
      condition_status_concept_id: integer
      stop_reason:
        type: string
        maxLength: 20
      provider_id: integer
      visit_occurrence_id: integer
      visit_detail_id: integer
      condition_source_value:
        type: string
        maxLength: 50
      condition_source_concept_id: integer
      condition_status_source_value:
        type: string
        maxLength: 50
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: provider_id
        references: provider.provider_id
      - column: visit_occurrence_id
        references: visit_occurrence.visit_occurrence_id
      - column: visit_detail_id
        references: visit_detail.visit_detail_id
      - column: condition_source_concept_id
        references: concept.concept_id
      - column: condition_status_source_concept_id
        references: concept.concept_id
      - column: condition_status_concept_id
        references: concept.concept_id
      - column: condition_type_concept_id
        references: concept.concept_id

  - name: drug_exposure
    primary_key: drug_exposure_id
    required_columns:
      - drug_exposure_id
      - person_id
      - drug_concept_id
      - drug_exposure_start_date
      - drug_exposure_end_date
      - drug_type_concept_id
    datatypes:
      drug_exposure_id: integer
      person_id: integer
      drug_concept_id: integer
      drug_exposure_start_date: datetime64[ns]
      drug_exposure_start_datetime: datetime64[ns]
      drug_exposure_end_date: datetime64[ns]
      drug_exposure_end_datetime: datetime64[ns]
      verbatim_end_date: datetime64[ns]
      drug_type_concept_id: integer
      stop_reason:
        type: string
        maxLength: 50
      refills: integer
      quantity: float
      days_supply: integer
      sig:
        type: string
        maxLength: 1000
      route_concept_id: integer
      lot_number:
        type: string
        maxLength: 50
      provider_id: integer
      visit_occurrence_id: integer
      visit_detail_id: integer
      drug_source_value:
        type: string
        maxLength: 50
      drug_source_concept_id: integer
      route_source_value:
        type: string
        maxLength: 50
      dose_unit_source_value:
        type: string
        maxLength: 50
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: provider_id
        references: provider.provider_id
      - column: visit_occurrence_id
        references: visit_occurrence.visit_occurrence_id
      - column: visit_detail_id
        references: visit_detail.visit_detail_id
      - column: drug_source_concept_id
        reference: concept.concept_id
      - column: route_concept_id
        reference: concept.concept_id
      - column: drug_type_concept_id
        reference: concept.concept_id
      - column: drug_concept_id
        reference: concept.concept_id


  - name: procedure_occurrence
    primary_key: procedure_occurrence_id
    required_columns:
      - procedure_occurrence_id
      - person_id
      - procedure_concept_id
      - procedure_date
      - procedure_type_concept_id
    datatypes:
      procedure_occurrence_id: integer
      person_id: integer
      procedure_concept_id: integer
      procedure_date: datetime64[ns]
      procedure_datetime: datetime64[ns]
      procedure_end_date: datetime64[ns]
      procedure_end_datetime: datetime64[ns]
      procedure_type_concept_id: integer
      modifier_concept_id: integer
      quantity: integer
      provider_id: integer
      visit_occurrence_id: integer
      visit_detail_id: integer
      procedure_source_value:
        type: string
        maxLength: 50
      procedure_source_concept_id: integer
      modifier_source_value:
        type: string
        maxLength: 50
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: provider_id
        references: provider.provider_id
      - column: visit_occurrence_id
        references: visit_occurrence.visit_occurrence_id
      - column: visit_detail_id
        references: visit_detail.visit_detail_id
      - column: procedure_source_concept_id
        reference: concept.concept_id
      - column: modifier_concept_id
        reference: concept.concept_id
      - column: procedure_type_concept_id
        reference: concept.concept_id
      - column: procedure_concept_id
        reference: concept.concept_id

  - name: device_exposure
    primary_key: device_exposure_id
    required_columns:
      - device_exposure_id
      - person_id
      - device_concept_id
      - device_exposure_start_date
      - device_type_concept_id
    datatypes:
      device_exposure_id: integer
      person_id: integer
      device_concept_id: integer
      device_exposure_start_date: datetime64[ns]
      device_exposure_start_datetime: datetime64[ns]
      device_exposure_end_date: datetime64[ns]
      device_exposure_end_datetime: datetime64[ns]
      device_type_concept_id: integer
      unique_device_id:
        type: string
        maxLength: 50
      production_id:
        type: string
        maxLength: 50
      quantity: int
      provider_id: integer
      visit_occurrence_id: integer
      visit_detail_id: integer
      device_source_value:
        type: string
        maxLength: 50
      device_source_concept_id: integer
      unit_concept_id: integer
      unit_source_value:
        type: string
        maxLength: 50
      unit_source_concept_id: integer
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: provider_id
        references: provider.provider_id
      - column: visit_occurrence_id
        references: visit_occurrence.visit_occurrence_id
      - column: visit_detail_id
        references: visit_detail.visit_detail_id
      - column: device_source_concept_id
        reference: concept.concept_id
      - column: unit_concept_id
        reference: concept.concept_id
      - column: unit_source_concept_id
        reference: concept.concept_id
      - column: device_concept_id
        reference: concept.concept_id
      - column: device_type_concept_id
        reference: concept.concept_id

  - name: measurement
    primary_key: measurement_id
    required_columns:
      - measurement_id
      - person_id
      - measurement_concept_id
      - measurement_date
      - measurement_type_concept_id
    datatypes:
      measurement_id: integer
      person_id: integer
      measurement_concept_id: integer
      measurement_date: datetime64[ns]
      measurement_datetime: datetime64[ns]
      measurement_time:
        type: string
        maxLength: 10
      measurement_type_concept_id: integer
      operator_concept_id: integer
      value_as_number: float
      value_as_concept_id: integer
      unit_concept_id: integer
      range_low: float
      range_high: float
      provider_id: integer
      visit_occurrence_id: integer
      visit_detail_id: integer
      measurement_source_value:
        type: string
        maxLength: 50
      measurement_source_concept_id: integer
      unit_source_value:
        type: string
        maxLength: 50
      unit_source_concept_id: integer
      value_source_value:
        type: string
        maxLength: 50
      measurement_event_id: integer
      meas_event_field_concept_id: integer
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: provider_id
        references: provider.provider_id
      - column: visit_occurrence_id
        references: visit_occurrence.visit_occurrence_id
      - column: visit_detail_id
        references: visit_detail.visit_detail_id
      - column: measurement_source_concept_id
        reference: concept.concept_id
      - column: unit_concept_id
        reference: concept.concept_id
      - column: unit_source_concept_id
        reference: concept.concept_id
      - column: value_as_concept_id
        reference: concept.concept_id
      - column: operator_concept_id
        reference: concept.concept_id
      - column: measurement_type_concept_id
        reference: concept.concept_id
      - column: measurement_concept_id
        reference: concept.concept_id
      - column: meas_event_field_concept_id
        reference: concept.concept_id

  - name: observation
    primary_key: observation_id
    required_columns:
      - observation_id
      - person_id
      - observation_concept_id
      - observation_date
      - observation_type_concept_id
    datatypes:
      observation_id: integer
      person_id: integer
      observation_concept_id: integer
      observation_date: datetime64[ns]
      observation_datetime: datetime64[ns]
      observation_type_concept_id: integer
      value_as_number: float
      value_as_string:
        type: string
        maxLength: 60
      value_as_concept_id: integer
      qualifier_concept_id: integer
      unit_concept_id: integer
      provider_id: integer
      visit_occurrence_id: integer
      visit_detail_id: integer
      observation_source_value:
        type: string
        maxLength: 50
      observation_source_concept_id: integer
      unit_source_value:
        type: string
        maxLength: 50
      qualifier_source_value:
        type: string
        maxLength: 50
      value_source_value:
        type: string
        maxLength: 50
      observation_event_id: integer
      obs_event_field_concept_id: integer
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: provider_id
        references: provider.provider_id
      - column: visit_occurrence_id
        references: visit_occurrence.visit_occurrence_id
      - column: visit_detail_id
        references: visit_detail.visit_detail_id
      - column: observation_source_concept_id
        reference: concept.concept_id
      - column: unit_concept_id
        reference: concept.concept_id
      - column: unit_source_concept_id
        reference: concept.concept_id
      - column: value_as_concept_id
        reference: concept.concept_id
      - column: qualifier_concept_id
        reference: concept.concept_id
      - column: observation_type_concept_id
        reference: concept.concept_id
      - column: observation_concept_id
        reference: concept.concept_id
      - column: obs_event_field_concept_id
        reference: concept.concept_id

  - name: death
    primary_key: person_id
    required_columns:
      - person_id
      - death_date
    datatypes:
      person_id: integer
      death_date: datetime64[ns]
      death_datetime: datetime64[ns]
      death_type_concept_id: integer
      cause_concept_id: integer
      cause_source_value:
        type: string
        maxLength: 50
      cause_source_concept_id: integer
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: cause_concept_id
        reference: concept.concept_id
      - column: death_type_concept_id
        reference: concept.concept_id
      - column: cause_source_concept_id
        reference: concept.concept_id

  - name: note
    primary_key: note_id
    required_columns:
      - note_id
      - person_id
      - note_date
      - note_type_concept_id
      - note_class_concept_id
      - note_text
      - encoding_concept_id
      - language_concept_id
    datatypes:
      note_id: integer
      person_id: integer
      note_date: datetime64[ns]
      note_datetime: datetime64[ns]
      note_type_concept_id: integer
      note_class_concept_id: int
      note_title:
        type: string
        maxLength: 250
      note_text:
        type: string
        maxLength: 65535
      encoding_concept_id: integer
      language_concept_id: integer
      provider_id: integer
      visit_occurrence_id: integer
      visit_detail_id: integer
      note_source_value:
        type: string
        maxLength: 50
      note_class_concept_id: integer
      note_event_id: integer
      note_event_field_concept_id: integer
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: provider_id
        references: provider.provider_id
      - column: visit_occurrence_id
        references: visit_occurrence.visit_occurrence_id
      - column: visit_detail_id
        references: visit_detail.visit_detail_id
      - column: note_class_concept_id
        reference: concept.concept_id
      - column: note_type_concept_id
        reference: concept.concept_id
      - column: encoding_concept_id
        reference: concept.concept_id
      - column: language_concept_id
        reference: concept.concept_id

  - name: note_nlp
    primary_key: note_nlp_id
    required_columns:
      - note_nlp_id
      - note_id
      - lexical_variant
      - nlp_date
    datatypes:
      note_nlp_id: integer
      note_id: integer
      section_concept_id: integer
      snippet:
        type: string
        maxLength: 50
      offset:
        type: string
        maxLength: 50
      lexical_variant:
        type: string
        maxLength: 50
      note_nlp_concept_id: integer
      note_nlp_source_concept_id: integer
      nlp_system:
        type: string
        maxLength: 50
      nlp_date: datetime64[ns]
      nlp_datetime: datetime64[ns]
      term_exists:
        type: string
        maxLength: 50
      term_temporal:
        type: string
        maxLength: 50
      term_modifiers:
        type: string
        maxLength: 50
    foreign_keys:
      - column: note_nlp_concept_id
        reference: concept.concept_id
      - column: note_nlp_source_concept_id
        reference: concept.concept_id
      - column: section_concept_id
        reference: concept.concept_id

  - name: specimen
    primary_key: specimen_id
    required_columns:
      - specimen_id
      - person_id
      - specimen_concept_id
      - specimen_type_concept_id
      - specimen_date
    datatypes:
      specimen_id: integer
      person_id: integer
      specimen_concept_id: integer
      specimen_type_concept_id: integer
      specimen_date: datetime64[ns]
      specimen_datetime: datetime64[ns]
      quantity: float
      unit_concept_id: integer
      anatomic_site_concept_id: integer
      disease_status_concept_id: integer
      specimen_source_id:
        type: string
        maxLength: 50
      specimen_source_value:
        type: string
        maxLength: 50
      unit_source_value:
        type: string
        maxLength: 50
      anatomic_site_source_value:
        type: string
        maxLength: 50
      disease_status_source_value:
        type: string
        maxLength: 50
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: specimen_concept_id
        reference: concept.concept_id
      - column: specimen_type_concept_id
        reference: concept.concept_id
      - column: unit_concept_id
        reference: concept.concept_id
      - column: anatomic_site_concept_id
        reference: concept.concept_id
      - column: disease_status_concept_id
        reference: concept.concept_id

  - name: fact_relationship
    primary_key:
    required_columns:
      - domain_concept_id_1
      - fact_id_1
      - domain_concept_id_2
      - fact_id_2
      - relationship_concept_id
    datatypes:
      domain_concept_id_1: integer
      fact_id_1: integer
      domain_concept_id_2: integer
      fact_id_2: integer
      relationship_concept_id: integer
    foreign_keys:
      - column: domain_concept_id_1
        references: domain.domain_concept_id
      - column: domain_concept_id_2
        references: domain.domain_concept_id
      - column: relationship_concept_id
        references: concept.concept_id

  - name: location
    primary_key: location_id
    required_columns:
      - location_id
    datatypes:
      location_id: integer
      address_1:
        type: string
        maxLength: 50
      address_2:
        type: string
        maxLength: 50
      city:
        type: string
        maxLength: 50
      state:
        type: string
        maxLength: 2
      zip:
        type: string
        maxLength: 10
      county:
        type: string
        maxLength: 50
      location_source_value:
        type: string
        maxLength: 50
      country_concept_id: integer
      country_source_value:
        type: string
        maxLength: 50
      latitude: float
      longitude: float
    foreign_keys:
      - column: country_concept_id
        reference: concept.concept_id

  - name: care_site
    primary_key: care_site_id
    required_columns:
      - care_site_id
    datatypes:
      care_site_id: int
      care_site_name:
        type: string
        maxLength: 255
      place_of_service_concept_id: integer
      location_id: integer
      care_site_source_value:
        type: string
        maxLength: 50
      place_of_service_source_value:
        type: string
        maxLength: 50
    foreign_keys:
      - column: location_id
        references: location.location_id
      - column: place_of_service_concept_id
        reference: concept.concept_id

  - name: provider
    primary_key: provider_id
    required_columns:
      - provider_id
    datatypes:
      provider_id: int
      provider_name:
        type: string
        maxLength: 255
      npi:
        type: string
        maxLength: 20
      dea:
        type: string
        maxLength: 20
      specialty_concept_id: integer
      care_site_id: integer
      year_of_birth: integer
      gender_concept_id: integer
      provider_source_value:
        type: string
        maxLength: 50
      specialty_source_value:
        type: string
        maxLength: 50
      specialty_source_concept_id: integer
      gender_source_value:
        type: string
        maxLength: 50
      gender_source_concept_id: integer
    foreign_keys:
      - column: care_site_id
        references: care_site.care_site_id
      - column: gender_concept_id
        reference: concept.concept_id
      - column: specialty_concept_id
        reference: concept.concept_id
      - column: specialty_source_concept_id
        reference: concept.concept_id
      - column: gender_source_concept_id
        reference: concept.concept_id

  - name: payer_plan_period
    primary_key: payer_plan_period_id
    required_columns:
      - payer_plan_period_id
      - person_id
      - payer_plan_period_start_date
      - payer_plan_period_end_date
    datatypes:
      payer_plan_period_id: integer
      person_id: integer
      payer_plan_period_start_date: datetime64[ns]
      payer_plan_period_end_date: datetime64[ns]
      payer_concept_id: integer
      payer_source_value:
        type: string
        maxLength: 50
      payer_source_concept_id: integer
      plan_concept_id: integer
      plan_source_value:
        type: string
        maxLength: 50
      plan_source_concept_id: integer
      sponsor_concept_id: integer
      sponsor_source_value:
        type: string
        maxLength: 50
      sponsor_source_concept_id: integer
      family_source_value:
        type: string
        maxLength: 50
      stop_reason_concept_id: integer
      stop_reason_source_value:
        type: string
        maxLength: 50
      stop_reason_source_concept_id: integer
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: payer_concept_id
        reference: concept.concept_id
      - column: payer_source_concept_id
        reference: concept.concept_id
      - column: plan_concept_id
        reference: concept.concept_id
      - column: plan_source_concept_id
        reference: concept.concept_id
      - column: sponsor_concept_id
        reference: concept.concept_id
      - column: sponsor_source_concept_id
        reference: concept.concept_id
      - column: stop_reason_concept_id
        reference: concept.concept_id
      - column: stop_reason_source_concept_id
        reference: concept.concept_id

  - name: cost
    primary_key: cost_id
    required_columns:
      - cost_id
      - cost_event_id
      - cost_domain_id
      - cost_type_concept_id
    datatypes:
      cost_id: integer
      cost_event_id: integer
      cost_domain_id:
        type: string
        maxLength: 20
      cost_type_concept_id: integer
      currency_concept_id: integer
      total_charge: float
      total_cost: float
      total_paid: float
      paid_by_payer: float
      paid_by_patient: float
      paid_patient_copay: float
      paid_patient_coinsurance: float
      paid_patient_deductible: float
      paid_by_primary: float
      paid_ingredient_cost: float
      paid_dispensing_fee: float
      payer_plan_period_id: int
      amount_allowed: float
      revenue_code_concept_id: integer
      revenue_code_source_value:
        type: string
        maxLength: 50
      drg_concept_id: integer
      drg_source_value:
        type: string
        maxLength: 3
    foreign_keys:
       - column: cost_type_concept_id
         reference: concept.concept_id
       - column: curency_concept_id
         reference: concept.concept_id
       - column: revenue_code_concept_id
         reference: concept.concept_id

  - name: drug_era
    primary_key: drug_era_id
    required_columns:
      - drug_era_id
      - person_id
      - drug_concept_id
      - drug_era_start_date
      - drug_era_end_date
    datatypes:
      drug_era_id: integer
      person_id: integer
      drug_concept_id: integer
      drug_era_start_date: datetime64[ns]
      drug_era_end_date: datetime64[ns]
      drug_exposure_count: integer
      gap_days: integer
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: drug_concept_id
        reference: concept.concept_id

  - name: dose_era
    primary_key: dose_era_id
    required_columns:
      - dose_era_id
      - person_id
      - drug_concept_id
      - unit_concept_id
      - dose_value
      - dose_era_start_date
      - dose_era_end_date
    datatypes:
      dose_era_id: integer
      person_id: integer
      drug_concept_id: integer
      unit_concept_id: integer
      dose_value: float
      dose_era_start_date: datetime64[ns]
      dose_era_end_date: datetime64[ns]
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: drug_concept_id
        reference: concept.concept_id
      - column: unit_concept_id
        reference: concept.concept_id

  - name: condition_era
    primary_key: condition_era_id
    required_columns:
      - condition_era_id
      - person_id
      - condition_concept_id
      - condition_era_start_date
      - condition_era_end_date
    datatypes:
      condition_era_id: integer
      person_id: integer
      condition_concept_id: integer
      condition_era_start_date: datetime64[ns]
      condition_era_end_date: datetime64[ns]
      condition_occurrence_count: integer
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: condition_concept_id
        reference: concept.concept_id

  - name: episode
    primary_key: episode_id
    required_columns:
      - episode_id
      - person_id
      - episode_concept_id
      - episode_start_date
      - episode_str_concept_id
      - episode_type_concept_id
    datatypes:
      episode_id: integer
      person_id: integer
      episode_concept_id: integer
      episode_start_date: datetime64[ns]
      episode_start_datetime: datetime64[ns]
      episode_end_date: datetime64[ns]
      episode_end_datetime: datetime64[ns]
      episode_parent_id: integer
      episode_number: integer
      episode_object_concept_id: integer
      episode_type_concept_id: integer
      episode_source_value:
        type: string
        maxLength: 50
      episode_source_concept_id: integer
    foreign_keys:
      - column: person_id
        references: person.person_id
      - column: episode_concept_id
        reference: concept.concept_id
      - column: episode_type_concept_id
        reference: concept.concept_id
      - column: episode_object_concept_id
        reference: concept.concept_id
      - column: episode_source_concept_id
        reference: concept.concept_id

  - name: episode_event
    required_columns:
      - episode_id
      - event_id
      - episode_event_field_concept_id
    datatypes:
      episode_id: integer
      event_id: integer
      episode_event_field_concept_id: integer
    foreign_keys:
      - column: episode_id
        references: episode.episode_id
      - column: episode_event_field_concept_id
        reference: concept.concept_id

  - name: metadata
    primary_key: metadata_id
    required_columns:
      - metadata_id
      - metadata_concept_id
      - metadata_type_concept_id
      - name
    datatypes:
      metadata_id: integer
      metadata_concept_id: integer
      metadata_type_concept_id: integer
      name:
        type: string
        maxLength: 250
      value_as_string:
        type: string
        maxLength: 250
      value_as_concept_id: int
      value_as_number: float
      metadata_date: datetime64[ns]
      metadata_datetime: datetime64[ns]
    foreign_keys:
      - column: metadata_concept_id
        reference: concept.concept_id
      - column: metadata_type_concept_id
        reference: concept.concept_id
      - column: value_as_concept_id
        reference: concept.concept_id

  - name: cdm_source
    required_columns:
      - cdm_source_name
      - cdm_source_abbreviation
      - cdm_holder
      - source_release_date
      - cdm_release_date
      - cdm_version_concept_id
      - vocabulary_version
    datatypes:
      cdm_source_name:
        type: string
        maxLength: 255
      cdm_source_abbreviation:
        type: string
        maxLength: 25
      cdm_holder:
        type: string
        maxLength: 255
      source_description:
        type: string
        maxLength: 65535
      source_documentation_reference:
        type: string
        maxLength: 255
      cdm_etl_reference:
        type: string
        maxLength: 255
      source_release_date: datetime64[ns]
      cdm_release_date: datetime64[ns]
      cdm_version:
        type: string
        maxLength: 10
      cdm_version_concept_id: integer
      vocabulary_version:
        type: string
        maxLength: 20
    foreign_keys:
      - column: cdm_version_concept_id
        reference: concept.concept_id

  - name: concept
    primary_key: concept_id
    required_columns:
      - concept_id
      - concept_name
      - domain_id
      - vocabulary_id
      - concept_class_id
      - concept_code
      - valid_start_date
      - valid_end_date
    datatypes:
      concept_id: integer
      concept_name:
        type: string
        maxLength: 255
      domain_id:
        type: string
        maxLength: 20
      vocabulary_id:
        type: string
        maxLength: 20
      concept_class_id:
        type: string
        maxLength: 20
      standard_concept:
        type: string
        maxLength: 1
      concept_code:
        type: string
        maxLength: 50
      valid_start_date: datetime64[ns]
      valid_end_date: datetime64[ns]
      invalid_reason:
        type: string
        maxLength: 1
    foreign_keys:
      - column: domain_id
        reference: domain.domain_id
      - column: vocabulary_id
        reference: vocabulary.vocabulary_id
      - column: concept_class_id
        reference: concept_class.concept_class_id

  - name: vocabulary
    primary_key: vocabulary_id
    required_columns:
      - vocabulary_id
      - vocabulary_name
      - vocabulary_concept_id
    datatypes:
      vocabulary_id:
        type: string
        maxLength: 20
      vocabulary_name:
        type: string
        maxLength: 255
      vocabulary_reference:
        type: string
        maxLength: 255
      vocabulary_version:
        type: string
        maxLength: 255
      vocabulary_concept_id: integer
    foreign_keys:
      - column: vocabulary_concept_id
        reference: concept.concept_id

  - name: domain
    primary_key: domain_id
    required_columns:
      - domain_id
      - domain_name
      - domain_concept_id
    datatypes:
      domain_id:
        type: string
        maxLength: 20
      domain_name:
        type: string
        maxLength: 255
      domain_concept_id: integer
    foreign_keys:
      - column: domain_concept_id
        reference: concept.concept_id

  - name: concept_class
    primary_key: concept_class_id
    required_columns:
      - concept_class_id
      - concept_class_name
      - concept_class_concept_id
    datatypes:
      concept_class_id:
        type: string
        maxLength: 20
      concept_class_name:
        type: string
        maxLength: 255
      concept_class_concept_id: integer
    foreign_keys:
      - column: concept_class_concept_id
        reference: concept.concept_id

  - name: concept_relationship
    primary_key:
      - concept_id_1
      - concept_id_2
      - relationship_id
    required_columns:
      - concept_id_1
      - concept_id_2
      - relationship_id
      - valid_start_date
      - valid_end_date
    datatypes:
      concept_id_1: integer
      concept_id_2: integer
      relationship_id:
        type: string
        maxLength: 20
      valid_start_date: datetime64[ns]
      valid_end_date: datetime64[ns]
      invalid_reason:
        type: string
        maxLength: 1
    foreign_keys:
      - column: concept_id_1
        references: concept.concept_id
      - column: concept_id_2
        references: concept.concept_id
      - column: relationship_id
        references: relationship.relationship_id

  - name: relationship
    primary_key: relationship_id
    required_columns:
      - relationship_id
      - relationship_name
      - is_hierarchical
      - defines_ancestry
      - reverse_relationship_id
      - relationship_concept_id
    datatypes:
      relationship_id:
        type: string
        maxLength: 20
      relationship_name:
        type: string
        maxLength: 255
      is_hierarchical:
        type: string
        maxLength: 1
      defines_ancestry:
        type: string
        maxLength: 1
      reverse_relationship_id:
        type: string
        maxLength: 20
      relationship_concept_id: integer
    foreign_keys:
      - column: relationship_concept_id
        references: concept.concept_id

  - name: concept_synonym
    required_columns:
      - concept_id
      - concept_synonym_name
      - language_concept_id
    datatypes:
      concept_id: integer
      concept_synonym_name:
        type: string
        maxLength: 1000
      language_concept_id: integer
    foreign_keys:
      - column: concept_id
        references: concept.concept_id
      - column: language_concept_id
        references: concept.concept_id

  - name: concept_ancestor
    required_columns:
      - ancestor_concept_id
      - descendant_concept_id
      - min_levels_of_separation
      - max_levels_of_separation
    datatypes:
      ancestor_concept_id: integer
      descendant_concept_id: integer
      min_levels_of_separation: integer
      max_levels_of_separation: integer
    foreign_keys:
      - column: ancestor_concept_id
        references: concept.concept_id
      - column: descendant_concept_id
        references: concept.concept_id

  - name: source_to_concept_map
    required_columns:
      - source_code
      - source_concept_id
      - source_vocabulary_id
      - target_concept_id
      - target_vocabulary_id
      - valid_start_date
      - valid_end_date
    datatypes:
      source_code:
        type: string
        maxLength: 50
      source_concept_id: integer
      source_vocabulary_id:
        type: string
        maxLength: 20
      source_code_description:
        type: string
        maxLength: 255
      target_concept_id: integer
      target_vocabulary_id:
        type: string
        maxLength: 20
      target_code_description:
        type: string
        maxLength: 255
      valid_start_date: datetime64[ns]
      valid_end_date: datetime64[ns]
      invalid_reason:
        type: string
        maxLength: 1
    foreign_keys:
      - column: source_concept_id
        references: concept.concept_id
      - column: target_concept_id
        references: concept.concept_id
      - column: target_vocabulary_id
        references: vocabulary.vocabulary_id

  - name: drug_strength
    required_columns:
      - drug_concept_id
      - ingredient_concept_id
      - valid_start_date
      - valid_end_date
    datatypes:
      drug_concept_id: integer
      ingredient_concept_id: integer
      amount_value: float
      amount_unit_concept_id: integer
      numerator_value: float
      numerator_unit_concept_id: integer
      denominator_value: float
      denominator_unit_concept_id: integer
      box_size: integer
      valid_start_date: datetime64[ns]
      valid_end_date: datetime64[ns]
      invalid_reason:
        type: string
        maxLength: 1
    foreign_keys:
      - column: drug_concept_id
        references: concept.concept_id
      - column: ingredient_concept_id
        references: concept.concept_id
      - column: amount_unit_concept_id
        references: concept.concept_id
      - column: numerator_unit_concept_id
        references: concept.concept_id
      - column: denominator_unit_concept_id
        references: concept.concept_id

  - name: cohort
    required_columns:
      - cohort_definition_id
      - subject_id
      - cohort_start_date
      - cohort_end_date
    datatypes:
      cohort_definition_id: integer
      subject_id: integer
      cohort_start_date: datetime64[ns]
      cohort_end_date: datetime64[ns]

  - name: cohort_definition
    primary_key: cohort_definition_id
    required_columns:
      - cohort_definition_id
      - cohort_definition_name
      - definition_type_concept_id
      - subject_concept_id
    datatypes:
      cohort_definition_id: integer
      cohort_definition_name:
        type: string
        maxLength: 255
      cohort_definition_description:
        type: string
        maxLength: 65535
      definition_type_concept_id: integer
      cohort_definition_syntax:
        type: string
        maxLength: 65535
      subject_concept_id: integer
      cohort_initiation_date: datetime64[ns]
    foreign_keys:
      - column: definition_type_concept_id
        references: concept.concept_id
      - column: subject_concept_id
        references: concept.concept_id
